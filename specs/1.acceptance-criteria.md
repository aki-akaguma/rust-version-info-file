# Acceptance Criteria (EARS format)

This document specifies the acceptance criteria for the `rust-version-info-file` library using the Easy Approach to Requirements Syntax (EARS). The system under test is referred to as "the library".

## Ubiquitous Requirements (Invariants)

*   **AC1:** The library shall provide a public function named `rust_version_info_file` that accepts a destination file path and a path to a `Cargo.toml` file.

## Event-Driven Requirements

*   **AC2:** When the `rust_version_info_file` function is called, the library shall execute a command to get the Rust compiler version.
*   **AC3:** When the `rust_version_info_file` function is called, the library shall execute the `cargo tree` command, pointing to the specified `Cargo.toml` file, to get the project's dependency tree.
*   **AC4:** When the `rust_version_info_file` function is called, the library shall generate a single string containing the collected rustc version and dependency tree information.
*   **AC5:** When processing the `cargo tree` output, the library shall remove the local path information from the root crate's description line.

## Optional Feature Requirements

*   **AC6:** Where the `RUSTC` environment variable is set, the library shall use its value as the `rustc` command.

## Unwanted Behavior (Conditional Requirements)

*   **AC7:** If the destination file does not exist, then the library shall create it with the generated version information.
*   **AC8:** If the destination file already exists and its content is different from the newly generated version information, then the library shall truncate and overwrite the file with the new information.
*   **AC9:** If the destination file already exists and its content is identical to the newly generated version information, then the library shall not modify the file.
